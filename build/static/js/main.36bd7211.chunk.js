(this.webpackJsonpfacerecognitionbrain=this.webpackJsonpfacerecognitionbrain||[]).push([[0],{133:function(e,t,n){},180:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},458:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n(35),i=n.n(s),c=(n(133),n(14)),o=n.n(c),r=n(33),l=n(112),u=n(113),d=n(28),b=n(128),m=n(127),g=n(49),h=n(114),j=n.n(h),p=n(115),f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var s="expires="+a.toUTCString();console.log("expires: ",a),document.cookie=e+"="+t+";"+s+";path=/"},O=function(e,t){var n=new Date;n.setHours(24,0,0,0),console.log("reset daily: ",n);var a="expires="+n.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"},x=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var s=n[a];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return"{}"},v=(n(180),"ON_INPUT_CHANGE"),y="ON_SUBMIT",S="SET_SUBMIT_FALSE",N="SET_BOX",w="ROUTE_CHANGE",D="SET_USER_DATA",C="CLEAR_INPUT_DATA",k="SET_MESSAGE_VISIBLE",A="SET_MESSAGE",T="SET_DownloadFacesBox_VISIBLE",I="SET_GenerateFacesButton_ACTIVE",F="ON_INPUT_CHANGE_DIRECT",P="http://192.168.29.234:8080",E=n(0),_=function(e){return"home"===e.route?Object(E.jsxs)("nav",{style:{display:"flex",justifyContent:"flex-end"},children:[Object(E.jsxs)("p",{id:"profile",className:"f3 link dim black underline pa3 pointer",onClick:function(){e.onRouteChange("profile")},children:["Profile"," "]}),Object(E.jsx)("p",{id:"signout",className:"f3 link dim black underline pa3 pointer",onClick:function(){fetch("".concat(P,"/signout"),{method:"post",headers:{"Content-Type":"application/json"},body:x("cookie1")}).then((function(e){return e.json()})).then((function(e){return console.log(e.message)})),e.onUserData({}),e.onRouteChange("signin"),e.onClearInputData(),f("cookie1",JSON.stringify({}),0)},children:"Sign Out"})]}):"profile"===e.route?Object(E.jsx)("nav",{style:{display:"flex",justifyContent:"flex-end"},children:Object(E.jsx)("p",{id:"signout",className:"f3 link dim black underline pa3 pointer",onClick:function(){return e.onRouteChange("home")},children:"Home"})}):Object(E.jsxs)("nav",{style:{display:"flex",justifyContent:"flex-end"},children:[Object(E.jsx)("p",{id:"Signin",className:"f3 link dim black underline pa3 pointer",onClick:function(){return e.onRouteChange("signin")},children:"Sign In"}),Object(E.jsx)("p",{id:"Register",className:"f3 link dim black underline pa3 pointer",onClick:function(){return e.onRouteChange("register")},children:"Register"})]})},B=n(119),V=n.n(B),M=(n(182),n.p+"static/media/brain.56936383.png"),R=function(){return Object(E.jsx)("div",{className:"ma4 mt0",children:Object(E.jsx)(V.a,{className:"Tilt br2 shadow-2",options:{max:55},style:{height:150,width:150},children:Object(E.jsx)("div",{className:"Tilt-inner pa3",children:Object(E.jsx)("img",{src:M,alt:"brain"})})})})},U=function(e){return Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{className:"white f3",children:"".concat(e.userData.name,", your current entry count is...")}),Object(E.jsx)("div",{className:"white f1",children:"#".concat(e.userData.entries)})]})},J=n(6),G=(n(183),n(184),n(120)),L=n.n(G);var q=function(e){var t=e.visible,n=e.text,a=e.type,s=e.classes||"",i=e.color||"#fff",c=e.color;return Object(E.jsxs)("div",{className:"Spinner ".concat(s," ").concat(t?"":"none"),children:[Object(E.jsx)(L.a,{type:a,color:i,height:50,width:50,timeout:0}),Object(E.jsx)("span",{style:c?{color:i}:{},class:"Loading_Text",children:n})]})},H=function(e){return Object(E.jsx)("div",{className:"bounding-box",style:{top:e.box.topRow,left:e.box.leftCol,right:e.box.rightCol,bottom:e.box.bottomRow}})},W=function(e){var t=e.boxArray.map((function(e){return Object(E.jsx)(H,{box:e})})),n=Object(a.useState)(!1),s=Object(J.a)(n,2),i=s[0],c=s[1];return Object(a.useEffect)((function(){document.querySelector("#imageFaceId").addEventListener("load",(function(){c(!0)}))}),[e.input]),Object(E.jsx)("div",{className:"flexCenter ma",children:Object(E.jsxs)("div",{className:"absolute mt2 imageBox",children:[Object(E.jsx)("img",{id:"imageFaceId",src:e.input,alt:"",height:"auto"}),t,Object(E.jsx)("div",{className:"spinnerOverlay ".concat(i&&e.faceDetectionPendingStatus?"":"none"),children:Object(E.jsx)(q,{text:"Detecting faces",type:"TailSpin",visible:i&&e.faceDetectionPendingStatus,classes:"detectionSpinner"})})]})})},z=(n(203),function(e,t){var n=e.outputs[0].data.regions,a=document.querySelector("#imageFaceId");Number(a.width),Number(a.height);if(!n)return t.alertMessage("Faces not detected"),void t.setGenerateFacesButtonActive(!1);console.log("faceArray: ",n);var s=n.map((function(e,n){var a=100*(e=e.region_info.bounding_box).left_col,s=100*(1-e.right_col),i=100*e.top_row,c=100*(1-e.bottom_row);return a=a.toString()+"%",s=s.toString()+"%",i=i.toString()+"%",c=c.toString()+"%",t.setGenerateFacesButtonActive(!0),{leftCol:a,rightCol:s,topRow:i,bottomRow:c}}));t.setBox(s)}),Y=function(e){var t;return Object(a.useEffect)((function(){e.setGenerateFacesButtonActive(!1),e.setFaceDetectionPendingStatus(!1)}),[e.input]),!0===e.submitStatus&&((t=(t=e.input).trimStart()).length>=4&&"http"===t.substr(0,4))?(e.setFaceDetectionPendingStatus(!0),fetch("".concat(P,"/ClarifaiApi"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e.input,email:e.userData.email})}).then((function(e){return e.json()})).then((function(t){if(e.setFaceDetectionPendingStatus(!1),"success"!==t.message)return console.log("response: ",t),void e.alertMessage(t.message);z(t.data,e),fetch("".concat(P,"/image"),{method:"PUT",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify(e.userData)}).then((function(e){return e.json()})).then((function(t){return e.onUserData(t)}))})).catch((function(t){e.setFaceDetectionPendingStatus(!1),console.log("error: ",t)})),setTimeout((function(){console.log("check")}),100),e.setSubmitFalse()):!0===e.submitStatus&&(e.setFaceDetectionPendingStatus(!0),fetch("".concat(P,"/detectLocalImage"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e.input,email:e.userData.email})}).then((function(e){return e.json()})).then((function(t){if(e.setFaceDetectionPendingStatus(!1),"success"!==t.message)return console.log("response: ",t),void e.alertMessage(t.message);z(t.data,e),fetch("".concat(P,"/image"),{method:"PUT",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify(e.userData)}).then((function(e){return e.json()})).then((function(t){return e.onUserData(t)}))})).catch((function(t){e.setFaceDetectionPendingStatus(!1),console.log(t)})),setTimeout((function(){console.log("check")}),100),e.setSubmitFalse()),console.log("submit",e.submitStatus),Object(E.jsxs)("div",{className:"",children:[Object(E.jsx)("p",{className:"f3",children:"This Magic Brain will detect faces in your pictures. Give it a try."}),Object(E.jsx)("div",{className:"flexCenter",children:Object(E.jsxs)("div",{className:"flexCenter form pa4 br3 shadow-5",children:[Object(E.jsx)("input",{type:"text",className:"f4 pa2 w-70 center",onChange:e.onInputChange,id:"imageInput",placeholder:"Paste image URL here"}),Object(E.jsx)("button",{className:"w-30 ph3 pv2 f4 grow link dib white bg-light-purple pointer",onClick:e.onSubmit,children:"Detect"})]})})]})},X=function(e){var t=Object(a.useState)(""),n=Object(J.a)(t,2),s=n[0],i=n[1],c=Object(a.useState)(""),o=Object(J.a)(c,2),r=o[0],l=o[1];e.alertMessage;return Object(E.jsx)("article",{className:"br2 ba dark-gray b--black-10 w-100 w-50-m w-25-l mv4 mw5 center",style:{},children:Object(E.jsx)("main",{className:"pa4 black-80",children:Object(E.jsxs)("div",{className:"measure",children:[Object(E.jsxs)("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0",children:[Object(E.jsx)("legend",{className:"f1 fw6 ph0 mh0",children:"Sign In"}),Object(E.jsxs)("div",{className:"mt3",children:[Object(E.jsx)("label",{className:"db fw6 lh-copy f6",for:"email-address",children:"Email"}),Object(E.jsx)("input",{onChange:function(e){i(e.target.value)},className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address"})]}),Object(E.jsxs)("div",{className:"mv3",children:[Object(E.jsx)("label",{className:"db fw6 lh-copy f6",for:"password",children:"Password"}),Object(E.jsx)("input",{onChange:function(e){l(e.target.value)},className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password"})]})]}),Object(E.jsx)("div",{className:"",children:Object(E.jsx)("input",{onClick:function(){if(console.log("signInState: ",{signInEmail:s,signInPassword:r}),""!==s)if(""!==r){var t={userName:s,pass:r};fetch("".concat(P,"/signin"),{method:"POST",mode:"cors",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"congrats"===t.message?(console.log("incoming cookies: ",JSON.stringify(t.cookies)),f("cookie1",JSON.stringify(t.cookies),1),e.onUserData(t.data),e.onRouteChange("home")):alert(t.message)})).catch((function(e){return console.log("err: ",e)}))}else alert("Empty password field");else alert("Empty email field")},id:"signin",className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign in"})}),Object(E.jsx)("div",{className:"lh-copy mt3",children:Object(E.jsx)("p",{onClick:function(){return e.onRouteChange("register")},id:"register",className:"f6 link dim black db pointer",children:"Register"})})]})})})},K=(n(204),function(e){var t=e.alertMessage,n=Object(a.useState)(""),s=Object(J.a)(n,2),i=s[0],c=s[1],l=Object(a.useState)(""),u=Object(J.a)(l,2),d=u[0],b=u[1],m=Object(a.useState)(""),g=Object(J.a)(m,2),h=g[0],j=g[1];return Object(E.jsx)("article",{className:"br2 ba dark-gray b--black-10 w-100 w-50-m w-25-l mv4 mw6 center increaseWidth",children:Object(E.jsx)("main",{className:"pa4 black-80",children:Object(E.jsxs)("div",{className:"measure",children:[Object(E.jsxs)("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0",children:[Object(E.jsx)("legend",{className:"f1 fw6 ph0 mh0",children:"Register"}),Object(E.jsxs)("div",{className:"mt3",children:[Object(E.jsx)("label",{className:"db fw6 lh-copy f6",for:"name",children:"Name"}),Object(E.jsx)("input",{onChange:function(e){j(e.target.value)},className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"name",id:"name"})]}),Object(E.jsxs)("div",{className:"mt3",children:[Object(E.jsx)("label",{className:"db fw6 lh-copy f6",for:"email-address",children:"Email"}),Object(E.jsx)("input",{onChange:function(e){c(e.target.value)},className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address"})]}),Object(E.jsxs)("div",{className:"mv3",children:[Object(E.jsx)("label",{className:"db fw6 lh-copy f6",for:"password",children:"Password"}),Object(E.jsx)("input",{onChange:function(e){b(e.target.value)},className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password"})]})]}),Object(E.jsx)("div",{className:"",children:Object(E.jsx)("input",{onClick:function(){var n;if(console.log("registerState: ",{signInName:h,signInEmail:i,signInPassword:d}),((null===(n=JSON.parse(x("cookie2")))||void 0===n?void 0:n.countRegistered)||0)>=10)alert("Registration limit for today exceeded");else if(""!==h)if(""!==i)if(""!==d){var a={name:h,userName:i,pass:d};fetch("".concat(P,"/register"),{method:"POST",mode:"cors",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then(function(){var n=Object(r.a)(o.a.mark((function n(a){var s,c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("registered"!==a.message){n.next=18;break}return f("cookie1",JSON.stringify(a.cookies),1),e.onUserData(a.data),e.onRouteChange("home"),t("Welcome to smart-brain. Please verify your email address to increase your usage limit upto 20. Don't forget to check your spam folder."),n.next=7,fetch("".concat(P,"/sendAuthenticationToken"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})});case 7:return s=n.sent,n.next=10,s.json();case 10:if("congrats"===(s=n.sent).message){n.next=14;break}return alert(s.message),n.abrupt("return");case 14:c=JSON.parse(x("cookie2")),"{}"!==JSON.stringify(c)?(console.log("cookie2 present: ",c),O("cookie2",JSON.stringify({countRegistered:c.countRegistered+1}))):O("cookie2",JSON.stringify({countRegistered:1})),n.next=20;break;case 18:console.log("annoying registration: ",a),alert(a.message);case 20:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}else alert("Password field empty");else alert("Email field empty");else alert("Name field empty")},id:"signin",className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Register"})})]})})})}),Q=(n(205),n(206),function(e){var t=Object(a.useState)(!1),n=Object(J.a)(t,2),s=n[0],i=n[1];return Object(E.jsx)("div",{className:"DeleteConfirmOverlay ".concat(e.isOverLayVisible?"active":""),onDoubleClick:function(){return e.setOverlayVisible(!1)},children:Object(E.jsxs)("div",{className:"DeleteConfirmBox red-border ",onDoubleClick:"event.preventDefault ? event.preventDefault() : event.returnValue = false;",children:[Object(E.jsx)("div",{className:"ConfirmMessage",children:Object(E.jsx)("h3",{children:"Are you sure you want to delete your account?"})}),Object(E.jsx)("input",{type:"text",id:"securitytext",className:"securityText",onChange:function(t){console.log(t.target.value),t.target.value.toLowerCase()===e.userData.name.toLowerCase()?i(!0):i(!1)}}),Object(E.jsx)("br",{}),Object(E.jsx)("p",{children:"Type your name first"}),Object(E.jsx)("p",{class:"securityName",children:e.userData.name}),Object(E.jsxs)("div",{className:"options",children:[Object(E.jsxs)("button",{className:"confirmDelete  ".concat(s?"enabled pointer":""),onClick:s?function(){return t=e.onRouteChange,fetch("".concat(P,"/delete"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.userData)}).then((function(e){return e.json()})).then((function(n){console.log("message returned: ",n),"Success"===n.message?(fetch("".concat(P,"/signout"),{method:"post",headers:{"Content-Type":"application/json"},body:x("cookie1")}).then((function(e){return e.json()})).then((function(n){console.log(n),e.onClearInputData(),t("signin")})),f("cookie1",JSON.stringify({}),0)):alert(n.message)})).catch(console.log),void e.setOverlayVisible(!1);var t}:"",children:["Ok ",Object(E.jsx)("i",{className:"fas fa-check Profile_editIcon"})," "]}),Object(E.jsxs)("button",{className:"cancelDelete pointer",onClick:function(){e.setOverlayVisible(!1),document.querySelector("#securitytext").value=""},children:["Cancel ",Object(E.jsx)("i",{className:"fas fa-times pointer cross_editIcon"})]})]})]})})}),Z=function(e){return console.log(e),Object(E.jsxs)("div",{className:"Main mt-2",children:[Object(E.jsxs)("div",{className:"Main_headings col-40",children:[Object(E.jsx)("p",{class:"heading",children:"ID"}),Object(E.jsx)("hr",{}),Object(E.jsx)("p",{class:"heading",children:"Email"}),Object(E.jsx)("hr",{}),Object(E.jsx)("p",{class:"heading",children:"Password"}),Object(E.jsx)("hr",{}),Object(E.jsx)("p",{class:"heading mt-2",children:"Created At"}),Object(E.jsx)("hr",{className:"broadline"})]}),Object(E.jsxs)("div",{className:"Main_data col-60",children:[Object(E.jsx)("p",{class:"heading",children:e.userData.id}),Object(E.jsx)("hr",{}),Object(E.jsx)("p",{class:"heading",children:e.userData.email}),Object(E.jsx)("hr",{}),Object(E.jsxs)("span",{className:"flexPassword centerStable ".concat(e.editablePassword?"increase-width":""),children:[Object(E.jsxs)("p",{id:"password",class:"heading ".concat(e.editablePassword?"editable":""," editablePassword "),children:["****"," "]}),Object(E.jsx)("i",{class:"fas ".concat(e.editablePassword?"fa-check":"fa-edit"," pointer Profile_editIcon   ml-1  small-icon"),onClick:e.editablePassword?e.submitPassword:e.editPassWord}),Object(E.jsx)("i",{class:"fas ".concat(e.editablePassword?"fa-times inline-block":"none"," pointer cross_editIcon  ml-1"),onClick:e.cancelPassword})," "]}),Object(E.jsx)("hr",{}),Object(E.jsx)("p",{class:"heading mt-2",children:e.userData.joined}),Object(E.jsx)("hr",{class:"broadline"})]})]})},$=function(e){var t=e.alertMessage,n=Object(a.useState)(!1),s=Object(J.a)(n,2),i=s[0],c=s[1],o=Object(a.useState)(!1),r=Object(J.a)(o,2),l=r[0],u=r[1],d=Object(a.useState)(e.userData.name),b=Object(J.a)(d,2),m=b[0],g=b[1],h=Object(a.useState)(!1),j=Object(J.a)(h,2),p=j[0],f=j[1],O=e.userData.verified?20:2;return Object(E.jsxs)("div",{className:"Profile center",children:[Object(E.jsx)("button",{className:"delete_icon_button pointer",onClick:function(){console.log("true visible"),f(!0)},children:Object(E.jsx)("i",{className:"fas fa-trash pointer delete_icon"})}),Object(E.jsx)(Q,{isOverLayVisible:p,setOverlayVisible:f,userData:e.userData,onRouteChange:e.onRouteChange,onUserData:e.onUserData,onClearInputData:e.onClearInputData}),Object(E.jsx)("img",{src:"images/whatsapp_pic.png",class:"profile_photo"}),Object(E.jsx)("br",{}),Object(E.jsxs)("h2",{id:"name",class:"Profile_name ".concat(i?"editable":""," inline-block"),children:[m," "]}),Object(E.jsx)("i",{class:"fas ".concat(i?"fa-check":"fa-edit"," pointer Profile_editIcon inline-block ml-1"),onClick:i?function(){var n=document.querySelector("#name");""!==n.innerText?(fetch("".concat(P,"/update"),{method:"PUT",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify({type:"name",id:e.userData.id,data:n.innerText,email:e.userData.email})}).then((function(e){return e.json()})).then((function(a){"success"===a.message?(e.onUserData(a.data),console.log("name: ",a.data.name),g(a.data.name),t("Your name is changed successfully")):(t(a.message),n.innerText=e.userData.name)})),n.setAttribute("contentEditable","false"),c(!1)):alert("Empty Name")}:function(){c(!0),document.querySelector("#name").setAttribute("contentEditable","true")}})," ",Object(E.jsx)("i",{class:"fas ".concat(i?"fa-times inline-block":"none"," pointer cross_editIcon  ml-1"),onClick:function(){var t=document.querySelector("#name");t.innerText=e.userData.name,t.setAttribute("contentEditable","false"),c(!1)}})," ",Object(E.jsx)(Z,{userData:e.userData,editablePassword:l,setEditable:u,editPassWord:function(){u(!0);var e=document.querySelector("#password");e.setAttribute("contentEditable","true"),e.innerText=""},submitPassword:function(){var n=document.querySelector("#password");""!==n.innerText?(fetch("".concat(P,"/update"),{method:"PUT",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify({type:"password",id:e.userData.id,data:n.innerText,email:e.userData.email})}).then((function(e){return e.json()})).then((function(e){"success"===e.message?t("Your password is changed successfully"):alert(e.message),n.innerText="****"})),n.setAttribute("contentEditable","false"),u(!1)):alert("Empty Password")},cancelPassword:function(){var e=document.querySelector("#password");e.innerText="****",e.setAttribute("contentEditable","false"),u(!1)}}),Object(E.jsx)("h1",{className:"entriesNo",children:e.userData.entries<=O?O-e.userData.entries:0}),Object(E.jsx)("p",{className:"entriesStatement",children:"Entries Left"})]})};n(207);var ee=function(e){var t=e.messageDisplay,n=e.isMessageVisible,s=e.setMessageVisible;return Object(a.useEffect)((function(){n&&setTimeout((function(){s(!1)}),1e4)}),[n]),t=(t=t.trimStart()).trimEnd(),console.log("messageDisplay: ",t),console.log("messageVisible: ",n),Object(E.jsxs)("div",{className:"PromptMessage pa-v-s ".concat(t.length>0&&n?"active":""),children:[Object(E.jsx)("span",{className:"PromptMessage_Message col-90",children:t}),Object(E.jsx)("span",{className:"PromptMessage_cross pointer pa-s m-s",onClick:function(){return s(!1)},children:"\u2715"})]})},te=(n(208),function(e){var t=e.isGenerateFacesButtonActive;e.setDownloadFaceBoxVisible;return Object(E.jsx)("div",{className:"GenerateFaces",children:Object(E.jsx)("button",{title:"Generate individual images of faces",className:"GenerateFaces_button ".concat(t?"active":""),onClick:t?function(){e.setDownloadFaceBoxVisible(!0)}:function(){e.setDownloadFaceBoxVisible(!1)},children:"Generate Photos"})})}),ne=(n(209),"100"),ae=function(e){var t=Object(a.useRef)(null),n=e.reloadVariable,s=Object(a.useState)("100"),i=Object(J.a)(s,2),c=i[0],o=i[1];return Object(a.useEffect)((function(){var n=e.x1,a=e.y1,s=e.width,i=e.height,c=e.image,r=t.current;r.style.border="1px solid #d3d3d3",o((i/s*Number(ne)).toString());var l=r.getContext("2d"),u=window.devicePixelRatio;if(r.width=r.width*u,r.height=r.height*u,c)try{c.crossOrigin=""}catch(d){console.log(d)}finally{c.addEventListener("load",(function(){console.log("image loaded"),l.drawImage(c,n,a,s,i,0,0,ne,i/s*ne);var e,t,o,u=l.getImageData(0,0,r.width,r.height),d=u.data.length,b={top:null,left:null,right:null,bottom:null};for(e=0;e<d;e+=4)0!==u.data[e+3]&&(t=e/4%r.width,o=~~(e/4/r.width),null===b.top&&(b.top=o),(null===b.left||t<b.left)&&(b.left=t),(null===b.right||b.right<t)&&(b.right=t),(null===b.bottom||b.bottom<o)&&(b.bottom=o));var m=b.bottom-b.top,g=b.right-b.left,h=l.getImageData(b.left,b.top,g,m);l.canvas.width=g,l.canvas.height=m,l.putImageData(h,0,0)}))}}),[n]),Object(E.jsx)("canvas",{width:ne,height:c,className:"canvas",ref:t,children:"Canvas not supported"})},se=n(121),ie=n.n(se),ce=n(122),oe=n.n(ce),re=n(123),le=n.n(re);var ue=function(e){var t=Object(a.useState)([]),n=Object(J.a)(t,2),s=n[0],i=n[1],c=Object(a.useState)([]),l=Object(J.a)(c,2),u=l[0],d=l[1],b=Object(a.useState)(!1),m=Object(J.a)(b,2),g=m[0],h=m[1],j=Object(a.useState)(""),p=Object(J.a)(j,2),f=(p[0],p[1]),O=e.setDownloadFaceBoxVisible,x=e.isDownloadFacesBoxVisible,v=e.boxArray,y=function(e){return e=Number(e.substr(0,e.length-1))},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e=e*t.width/100},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e=e*t.height/100},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;document.getElementById("imageFaceId");return e=y(e),e="width"===t?S(e,n):N(e,n)};return Object(a.useEffect)(Object(r.a)(o.a.mark((function t(){var n,a,s,c,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==v.length){t.next=2;break}return t.abrupt("return");case 2:if(f(e.input),n=document.querySelector("#imageFaceId"),a=new Image,s=n.src,!((o=(o=n.src).trimStart()).length>=4&&"http"===o.substr(0,4))){t.next=18;break}return h(!0),t.next=10,fetch("".concat(P,"/getImageBytes"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({src:n.src})});case 10:return c=t.sent,t.next=13,c.json();case 13:if("success"===(c=t.sent).message){t.next=17;break}return e.alertMessage(c.message),t.abrupt("return");case 17:s=c.imageBytes;case 18:h(!1),console.log("image bytes: ",s),a.src=s,a.width=n.naturalWidth,a.height=n.naturalHeight,a.id="trimmedimg",r=v.map((function(e,t){var n=e.leftCol,s=e.rightCol,i=e.topRow,c=e.bottomRow,o=e.leftCol;o=w(o,"width",a);var r=e.topRow;r=w(r,"height",a);var l=100-y(s)-y(n);l=l.toString()+"%",l=w(l,"width",a);var u=100-y(c)-y(i);u=u.toString()+"%";u=w(u,"height",a);return Object(E.jsx)(ae,{x1:o,y1:r,width:l,height:u,image:a,reloadVariable:v})})),i(r);case 26:case"end":return t.stop()}var o}),t)}))),[v]),Object(a.useEffect)((function(){var e=document.querySelector(".imageCollection").children;console.log("imagecollection: ",e);for(var t=[],n=0;n<e.length;n++)"CANVAS"===e[n].tagName&&t.push(e[n].toDataURL());d(t)}),[x]),Object(E.jsx)("div",{className:"DownloadFacesOverlay ".concat(x?"active":""),children:Object(E.jsxs)("div",{className:"DownloadFacesBox",children:[Object(E.jsx)("nav",{className:"Navigation",children:Object(E.jsx)("button",{className:"cross",onClick:function(){O(!1)},children:"\xd7"})}),Object(E.jsx)("div",{className:"imageCollection",children:s}),Object(E.jsx)("div",{className:"footer",children:Object(E.jsx)("button",{className:"DownloadImages_button",onClick:function(){return function(e){console.log("onButtonClick: ",e);var t=0,n=new ie.a,a="Faces.zip",s=e;s.forEach((function(e,i){var c="Face".concat(i+1);oe.a.getBinaryContent(e,(function(e,i){if(e)throw e;n.file("".concat(c,".jpg"),i,{binary:!0}),++t==s.length&&n.generateAsync({type:"blob"}).then((function(e){le()(e,a)}))}))}))}(u)},children:"Download All"})}),Object(E.jsx)(q,{text:"Loading faces",type:"Oval",visible:g,classes:"loadingFaceSpinner",color:"blue"})]})})};n(216);var de=function(e){var t=Object(a.useState)(!0),n=Object(J.a)(t,2),s=n[0],i=n[1],c=e.setAnimationEnabled;return Object(E.jsxs)("div",{className:"ToggleAnimation",children:[Object(E.jsx)("div",{className:"toggleBox ".concat(s?"active":""),title:"Animation uses GPU. If hardware accelaration is not supported then toggle it off.",onClick:function(){s?(i(!1),c(!1)):(i(!0),c(!0))},children:Object(E.jsx)("div",{className:"toggleSlider"})}),Object(E.jsx)("span",{children:"Animation"})]})},be=(n(217),n(18)),me=n.n(be);var ge=function(e){var t=Object(a.useState)(""),n=Object(J.a)(t,2),s=n[0],i=n[1],c=e.setSpinnerVisible,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.querySelector("#imageFaceId");n.src=t,c(!!e)};Object(a.useEffect)((function(){console.log("selected filename: ",s)}),[s]);var r=Object(a.useState)(!1),l=Object(J.a)(r,2),u=l[0],d=l[1],b=Object(a.useState)(null),m=Object(J.a)(b,2),g=m[0],h=m[1],j=e.setInputChangeDirect;return Object(E.jsxs)("div",{className:"ImageUploadBox_Main","data-fileName":s,children:[Object(E.jsxs)("div",{className:"ImageUploadBox",children:[Object(E.jsxs)("button",{class:"btn ".concat(u?"hovered":""," "),children:[Object(E.jsx)("i",{className:"fas fa-paperclip mr-m"}),"Upload a image"]}),Object(E.jsx)("input",{id:"fileUpload",className:"fileUploadInput",accept:"image/*",type:"file",onMouseEnter:function(){d(!0)},onMouseLeave:function(){d(!1)},onChange:function(e){var t;h(e.target.files[0]),i((null===(t=e.target.files[0])||void 0===t?void 0:t.name)||"")}})]}),Object(E.jsx)("button",{className:"imageUploadSubmitBox_btn",onClick:function(){if(i(""),(null===g||void 0===g?void 0:g.size)>10485760)e.alertMessage("Image size must be under 10 mb");else{var t=new FormData;t.append("myFile",g),console.log("selected File: ",g),null!==g?(o(!0),me.a.post("".concat(P,"/uploadLocalFile"),t,{}).then((function(t){o(!1,e.input),console.log(t.statusText),"success"===t.data.message&&j(t.data.src)})).catch((function(e){c(!1),console.log(e)}))):alert("Select the image to upload")}},children:Object(E.jsx)("i",{className:"fas fa-paper-plane"})})]})},he=n(124),je=n.n(he),pe={particles:{number:{value:50,limit:100,density:{enable:!0,value_area:700}}},interactivity:{detect_on:"window",events:{onhover:{enable:!0,mode:"repulse"},onclick:{enable:!0,mode:"push"}},resize:!0},modes:{grab:{distance:200,line_linked:{opacity:1}}}},fe=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).idleTimer=null,e.handleOnActive=e.handleOnActive.bind(Object(d.a)(e)),e.handleOnIdle=e.handleOnIdle.bind(Object(d.a)(e)),e.setAnimationEnabled=e.setAnimationEnabled.bind(Object(d.a)(e)),e.setSpinnerVisible=e.setSpinnerVisible.bind(Object(d.a)(e)),e.setFaceDetectionPendingStatus=e.setFaceDetectionPendingStatus.bind(Object(d.a)(e)),e.state={update:"false",isAnimationActive:!0,isAnimationEnabled:!0,spinnerVisible:!1,faceDetectionPendingStatus:!1},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onRouteChange,n=e.onUserData,a=e.setMessageDisplay,s=e.setMessageVisible;console.log("body post: ",JSON.stringify({userId:JSON.parse(x("cookie1")).userId})),fetch("".concat(P,"/checkSession"),{method:"POST",headers:{"Content-Type":"application/json"},withCredentials:!0,body:x("cookie1")}).then((function(e){return e.json()})).then(function(){var e=Object(r.a)(o.a.mark((function e(i){var c,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sessionActive"!==i.message){e.next=11;break}if(n(i.user),t("home"),console.log("data.user: ",i.user),c=i.user,r=c.verified,l=c.verified_seen,!r||!1!==l){e.next=11;break}return e.next=8,fetch("".concat(P,"/verified-seen"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.user.email})});case 8:e.sent,a("Your email is verified. Limit is increased upto 20"),s(!0),n(Object.assign({},i.user,{verified_seen:!0}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"handleOnActive",value:function(e){console.log("user is active",e),console.log("time remaining",this.idleTimer.getRemainingTime()),this.setState({isAnimationActive:!0})}},{key:"handleOnIdle",value:function(e){console.log("user is idle",e),console.log("last active",this.idleTimer.getLastActiveTime()),this.setState({isAnimationActive:!1})}},{key:"setAnimationEnabled",value:function(e){this.setState({isAnimationEnabled:e})}},{key:"setSpinnerVisible",value:function(e){console.log("setSpinnerVisible: ",e),this.setState({spinnerVisible:e})}},{key:"setFaceDetectionPendingStatus",value:function(e){this.setState({faceDetectionPendingStatus:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.input,a=t.onInputChange,s=t.submitStatus,i=t.onSubmit,c=t.setSubmitFalse,o=t.boxArray,r=t.setBox,l=t.onRouteChange,u=t.route,d=t.onUserData,b=t.userData,m=t.onClearInputData,g=t.isMessageVisible,h=t.setMessageVisible,f=t.messageDisplay,O=t.setMessageDisplay,x=t.setDownloadFaceBoxVisible,v=t.isDownloadFacesBoxVisible,y=t.setGenerateFacesButtonActive,S=t.isGenerateFacesButtonActive,N=t.setInputChangeDirect,w=function(e){O(e),h(!0)};return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(p.a,{ref:function(t){e.idleTimer=t},timeout:12e4,onActive:this.handleOnActive,onIdle:this.handleOnIdle}),Object(E.jsx)(de,{setAnimationEnabled:this.setAnimationEnabled}),Object(E.jsx)(je.a,{className:"particles ".concat(this.state.isAnimationActive&&this.state.isAnimationEnabled?"":"none1"),params:pe}),Object(E.jsx)(_,{onRouteChange:l,route:u,onUserData:d,onClearInputData:m,userData:b}),Object(E.jsx)(ee,{messageDisplay:f,isMessageVisible:g,setMessageVisible:h,alertMessage:w}),"signin"===u?Object(E.jsx)(X,{onRouteChange:l,onUserData:d,alertMessage:w}):"register"===u?Object(E.jsx)(K,{onRouteChange:l,onUserData:d,alertMessage:w}):"profile"===u?Object(E.jsx)($,{userData:b,onUserData:d,onRouteChange:l,onClearInputData:m,alertMessage:w}):Object(E.jsxs)("div",{children:[Object(E.jsx)(R,{}),Object(E.jsx)(U,{userData:b}),Object(E.jsx)(Y,{onInputChange:a,input:n,submitStatus:s,onSubmit:i,Clarifai:j.a,setSubmitFalse:c,setBox:r,userData:b,onUserData:d,alertMessage:w,setGenerateFacesButtonActive:y,setFaceDetectionPendingStatus:this.setFaceDetectionPendingStatus}),Object(E.jsx)("div",{className:"OR",children:"OR"}),Object(E.jsx)(ge,{setInputChangeDirect:N,alertMessage:w,setSpinnerVisible:this.setSpinnerVisible,input:n}),Object(E.jsx)(q,{visible:this.state.spinnerVisible,text:"Loading Image",type:"Circles"}),Object(E.jsx)(te,{isGenerateFacesButtonActive:S,setDownloadFaceBoxVisible:x}),Object(E.jsx)(W,{input:n,boxArray:o,faceDetectionPendingStatus:this.state.faceDetectionPendingStatus}),Object(E.jsx)(ue,{setDownloadFaceBoxVisible:x,isDownloadFacesBoxVisible:v,alertMessage:w,boxArray:o,input:n})]})]})}}]),n}(a.Component),Oe=Object(g.b)((function(e){return{input:e.input,submitStatus:e.submitStatus,boxArray:e.boxArray,route:e.route,userData:e.userData,isMessageVisible:e.isMessageVisible,messageDisplay:e.messageDisplay,isDownloadFacesBoxVisible:e.isDownloadFacesBoxVisible,isGenerateFacesButtonActive:e.isGenerateFacesButtonActive}}),(function(e){return{onInputChange:function(t){return e((n=t.target.value,{type:v,payload:n}));var n},onSubmit:function(){return e({type:y})},setSubmitFalse:function(){return e({type:S})},setBox:function(t){return e({type:N,payload:t})},onRouteChange:function(t){return e(function(e){return{type:w,payload:e}}(t))},onUserData:function(t){return e(function(e){return{type:D,payload:e}}(t))},onClearInputData:function(){return e({type:C})},setMessageVisible:function(t){return e(function(e){return{type:k,payload:e}}(t))},setMessageDisplay:function(t){return e(function(e){return{type:A,payload:e}}(t))},setDownloadFaceBoxVisible:function(t){return e(function(e){return{type:T,payload:e}}(t))},setGenerateFacesButtonActive:function(t){return e(function(e){return{type:I,payload:e}}(t))},setInputChangeDirect:function(t){return e(function(e){return{type:F,payload:e}}(t))}}}))(fe),xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,459)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))},ve=(n(457),n(68)),ye={input:"",submitStatus:!1,boxArray:[],route:"signin",userData:{},isMessageVisible:!1,messageDisplay:"",isDownloadFacesBoxVisible:!1,isGenerateFacesButtonActive:!1},Se=function(e){var t;if(e&&(t=e.joined),null===t||void 0===t)return e;t=t.split("");for(var n=0;n<t.length;n++)if("T"===t[n]&&(t[n]=" "),"."===t[n]){for(;n<t.length;n++)t[n]="";break}return t=t.join(""),e.joined=t,e},Ne=n(125),we=n(126),De=(Object(Ne.createLogger)(),Object(ve.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case v:return Object.assign({},e,{input:t.payload,boxArray:[]});case y:return Object.assign({},e,{submitStatus:!0});case S:return Object.assign({},e,{submitStatus:!1});case N:return Object.assign({},e,{boxArray:t.payload});case w:return Object.assign({},e,{route:t.payload});case D:var n=Object.assign({},t.payload);return n=Se(n),Object.assign({},e,{userData:n});case C:return Object.assign({},ye);case k:return Object.assign({},e,{isMessageVisible:t.payload});case A:return Object.assign({},e,{messageDisplay:t.payload});case T:return Object.assign({},e,{isDownloadFacesBoxVisible:t.payload});case I:return Object.assign({},e,{isGenerateFacesButtonActive:t.payload});case F:return Object.assign({},e,{input:t.payload,boxArray:[]});default:return e}}),Object(ve.a)(we.a)));console.log=function(){},i.a.render(Object(E.jsx)(g.a,{store:De,children:Object(E.jsx)(Oe,{})}),document.getElementById("root")),xe()}},[[458,1,2]]]);
//# sourceMappingURL=main.36bd7211.chunk.js.map